---
interface Props {
  images: CarouselImage[];
}

type CarouselImage = {
  src: string;
  title: string;
  subtitle?: string;
};

const { images } = Astro.props;

const activeClasses =
  "carousel-item active relative float-left max-h-screen w-full";
const inactiveClasses = "carousel-item relative float-left max-h-screen w-full";
---

<div
  id="carouselDarkVariant"
  class="carousel slide carousel-fade relative"
  data-bs-ride="carousel"
>
  <!-- Indicators -->
  <div
    class="carousel-indicators absolute right-0 bottom-0 left-0 flex justify-center p-0 mb-4"
  >
    <button
      data-bs-target="#carouselDarkVariant"
      data-bs-slide-to="0"
      class="active"
      aria-current="true"
      aria-label="Slide 1"></button>
    <button
      data-bs-target="#carouselDarkVariant"
      data-bs-slide-to="1"
      aria-label="Slide 1"></button>
    <button
      data-bs-target="#carouselDarkVariant"
      data-bs-slide-to="2"
      aria-label="Slide 1"></button>
  </div>

  <!-- Inner -->
  <div class="carousel-inner relative overflow-hidden">
    {
      images.map((image, index) => (
        <>
          <div class={index === 0 ? activeClasses : inactiveClasses}>
            <img src={image.src} class="block w-full" alt="Motorbike Smoke" />
            <div class="carousel-caption hidden md:block absolute text-center">
              <div class="mb-[20%] line-up">
                <h5 class="text-3xl font-bold text-white">{image.title}</h5>
                {image.subtitle != undefined ? (
                  <p class="my-4 text-white text-lg">{image.subtitle}</p>
                ) : (
                  <div />
                )}
                <div class="flex justify-center my-8">
                  <div class="w-[30%] border-b-2 border-yellow-500" />
                </div>
              </div>
            </div>
          </div>
        </>
      ))
    }
  </div>
  <!-- Inner -->

  <!-- Controls -->
  <button
    class="carousel-control-prev absolute top-0 bottom-0 flex items-center justify-center p-0 text-center border-0 hover:outline-none hover:no-underline focus:outline-none focus:no-underline left-0"
    type="button"
    data-bs-target="#carouselDarkVariant"
    data-bs-slide="prev"
  >
    <span
      class="absolute mx-16 left-0 carousel-control-prev-icon inline-block bg-no-repeat"
      aria-hidden="true"></span>
  </button>
  <button
    class="carousel-control-next absolute top-0 bottom-0 flex items-center justify-center p-0 text-center border-0 hover:outline-none hover:no-underline focus:outline-none focus:no-underline right-0"
    type="button"
    data-bs-target="#carouselDarkVariant"
    data-bs-slide="next"
  >
    <span
      class="absolute carousel-control-next-icon mx-16 right-0 inline-block bg-no-repeat"
      aria-hidden="true"></span>
  </button>
</div>

<style>
.line-up {
  animation: 3s anim-line-up ease-out forwards;
}
</style>
